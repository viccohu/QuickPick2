# QuickPick2 - Windows桌面图片查看管理器

## 项目简介
QuickPick2是一款基于Electron开发的Windows桌面图片查看管理器，支持JPG/RAW格式图片预览、双路径管理、星级/标签管理、缩略图堆叠、星级筛选、分级导出等功能。

## 功能特性

### 1. 双路径管理模块
- 支持设置独立的JPG文件路径和RAW文件路径
- 提供文本输入框和文件夹选择按钮
- 自动扫描对应路径下的图片文件

### 2. 预览与缩略图模块
- 中间大图预览，支持鼠标滚轮缩放、拖拽移动
- 键盘左右键切换图片
- 底部缩略图展示栏，支持横向滚动
- 按文件名前缀自动堆叠JPG和RAW文件
- 缩略图显示格式标签和星级评级

### 3. 星级与标签管理模块
- 1-5星评级系统，支持点击取消评级
- 数据持久化存储在用户目录
- 自动加载和显示图片星级

### 4. 星级筛选模块
- 支持多种筛选条件：全部、等于、大于等于、小于等于、无星、有星
- 可视化星级筛选控件
- 实时显示筛选状态

### 5. 分级导出模块
- 4星级及以下：仅导出JPG文件
- 5星级：同时导出JPG和RAW文件
- 自动创建目标子文件夹
- 导出完成后显示统计信息

## 环境搭建

### 1. 安装Node.js
- 访问 [Node.js官网](https://nodejs.org/) 下载并安装最新版本的Node.js
- 验证安装：在命令行中运行 `node -v` 和 `npm -v`，确保输出版本信息

### 2. 克隆项目
```bash
git clone <项目地址>
cd QuickPick2
```

### 3. 安装依赖
```bash
# 设置npm镜像源（可选，加速下载）
npm config set registry https://registry.npmmirror.com

# 安装依赖
npm install
```

## 运行项目
```bash
npm start
```

## 打包成EXE
```bash
# 构建项目
npm run build
```
构建完成后，可执行文件将生成在 `dist` 目录中。

## 使用说明

### 1. 设置图片路径
1. 在顶部路径管理区域，分别输入或选择JPG文件路径和RAW文件路径
2. 点击「确认」按钮或按回车键，系统将自动扫描对应路径下的图片文件

### 2. 浏览和预览图片
- 点击底部缩略图切换图片
- 使用键盘左右键切换图片
- 鼠标滚轮缩放图片
- 拖拽鼠标移动缩放后的图片

### 3. 星级评级
- 点击中间预览区域下方的星级控件进行评级
- 再次点击已选中的星级可取消评级
- 评级信息将自动保存

### 4. 筛选图片
- 在底部操作栏的下拉框中选择筛选条件
- 点击右侧的星级控件设置筛选星级
- 系统将自动筛选并显示符合条件的图片

### 5. 导出图片
- 点击底部操作栏的「导出标星文件」按钮
- 选择导出目标目录
- 系统将根据星级自动导出对应文件：
  - 4星级及以下：仅导出JPG文件到 `JPG_Export` 文件夹
  - 5星级：同时导出JPG文件到 `JPG_Export` 文件夹，RAW文件到 `RAW_Export` 文件夹

## 技术栈
- Electron：跨平台桌面应用框架
- HTML/CSS/JavaScript：前端界面和逻辑
- Node.js：后端运行环境

## 项目结构
```
QuickPick2/
├── main.js          # 主进程文件
├── preload.js       # 预加载脚本
├── index.html       # 主页面
├── package.json     # 项目配置和依赖
└── README.md        # 项目说明
```

## 注意事项
- 支持的图片格式：
  - JPG：.jpg, .jpeg
  - RAW：.cr2, .cr3, .arw, .nef, .dng
- 数据存储位置：`用户目录/.photo_manager/ratings_tags.json`
- 导出文件保留原文件名
- 首次运行时会自动创建必要的目录结构

## 性能优化
- 图片预览优先使用JPG文件，节约资源
- 缩略图懒加载，提高加载速度
- 支持单次处理≥1000张图片
- 操作响应时间≤1秒

## 异常处理
- 路径不存在时显示友好提示
- 文件损坏时自动跳过
- 无权限访问时显示错误信息
- 格式不支持时自动过滤